# Assignment 3

6.2 考虑象限间的对称性而扩充Bresenham画线算法，从而生成具有任何斜率的直线。

或扩充Bresenham画线算法，计算以（10，20），（18，30）为端点的直线段像素坐标。

6.4 使用中点算法推导沿斜率在 范围内的线段路径生成点的决策参数，并表示出中点决策参数与Bresenham画线算法中的相同。

6.8 假设系统有一个8英寸x 10英寸、每英寸能显示100个像素的监视器。如果存储器的字长为一字节，起始帧缓存地址为0，并且每个像素对应存储器的1个字节，那屏幕坐标(x,y)在帧缓存的地址是什么？

5.15 考虑分辨率为512x512 ，每像素20位的帧缓存和每像素24位的颜色查找表的RGB光栅系统，（1）使用这样的系统可以显示多少种不同的灰度等级？（2）能显示多少种不同的颜色（包括灰度等级）？（3）在任何一个时刻能显示多少种颜色？（4）总的存储容量是多少？（5）说明两种减少容量的同时保持相同的颜色能力的方法。

 备注：此题的数值与英文第四版教材习题5.15一致，以此为准。



### 6.2 

假设一条直线l1的斜率m>1，则一定存在一条0<m<1的直线l2与l1关于y=x对称，在l1上任取一点P1(x,y)，则P2(y,x)一定在直线l2上，将P2的坐标代入l2的`Bresenham`公式，得到l1直线的`Bresenham`算法（Δx与Δy交换）：

（以下递推公式的起点均是左端点）

![image-20210921152834253](D:\应用软件\Typora2\Typora\typora-user-images\image-20210921152834253.png)

不利用对称性直接推导过程如下：

![image-20210921152425019](D:\应用软件\Typora2\Typora\typora-user-images\image-20210921152425019.png)

算法描述如下：

1)输入直线端点坐标(xa,ya),(xb,yb)，并将左端点存储在(xa,ya)中；
2)计算常数P0, C1,C2， 若P0 < 0， 下一点的x坐标不变，否则下一点的 x坐标加1；
3)画起始点(xa,ya)；
4)以单位步长增加y坐标，计算`Pi+1` ，确定下一点；
5)重复第4步，直至`yi=yb`.

同理，假设一条直线l3的斜率-1<m<0，则一定存在一条0<m<1的直线l4与l3关于y=0对称，在l3上任取一点P1(x,y)，则P3(x,-y)一定在直线l4上，将P2的坐标代入l4的`Bresenham`公式，得到l1直线的`Bresenham`算法（Δy变成-Δy）Δx>0,Δy<0

![image-20210921153533718](D:\应用软件\Typora2\Typora\typora-user-images\image-20210921153533718.png)

如果以左端点为起点，右端点为终点，那么始终不变Δx，只变Δy，Δx>0,Δy<0，这里应该都是加号[直线的斜率m<-1，直线的`Bresenham`算法（Δx变成-Δx)Δx<0,Δy>0]

![image-20210921153555940](D:\应用软件\Typora2\Typora\typora-user-images\image-20210921153555940.png)

水平线，对角线的情况：

![image-20210921160320101](D:\应用软件\Typora2\Typora\typora-user-images\image-20210921160320101.png)   

以（10，20），（18，30）为端点的直线段像素坐标：

也可以先关于y=x做对称，再对称回去

（10,20），（11,21），（12,22），（12,23），(13,24）,（14，25），（15,26），（16,27），（16,28），（17,29），（18,30）

### 6.4 

![image-20210922171154424](D:\应用软件\Typora2\Typora\typora-user-images\image-20210922171154424.png)

相同点：都用到了乘Δx和递推的方法来避免进行浮点数的运算，Tk+1可以通过Tk加减Δx，Δy递推得到，Tk的正负不同时递推表达式不同；都是决策参数大于等于0选择yk+1，小于0选择yk。

如果设决策参数的时候设成乘2δx，那么中点算法和Bresenham的决策参数是相同的



### 6.8 

800*y+x

Tips：`m*n 横*竖`  起始帧缓存地址为0，起始是（0，0）



### 5.15 

考虑分辨率为512x512 ，每像素20位的帧缓存和每像素24位的颜色查找表的RGB光栅系统，

（1）使用这样的系统可以显示多少种不同的灰度等级？

2^8^（灰度：R，G，B相等）

（2）能显示多少种不同的颜色（包括灰度等级）？

2^24^

每像素24位的颜色查找表就是每一表项使用24位来表示一种颜色，即每种颜色的R,G,B分别占用一个比特，总颜色一共有2^24^种，每个像素点的帧缓存存储颜色索引，20位有2^20^次方中排列方式

即颜色查找表有2^20^项，但是不同时刻存的颜色可以更换，所以所有的颜色和灰度等级都能被显示



（3）在任何一个时刻能显示多少种颜色？

在一个时刻的话还要综合考虑屏幕的总像素和颜色查找表一次能存下的颜色数，取最小值

512×512（512×512<2^20^）

（4）总的存储容量是多少？（帧缓存+颜色查找表）

512×512×20bits+2^20^×24bits

（5）说明两种减少容量的同时保持相同的颜色能力的方法。

512×512<2^20^，其实没必要用查找表，查找表的项数冗余了，一个时刻只能显示512×512，不如用直接存储策略，每像素帧缓存采用24位或者缩小颜色查找表的项数，帧缓存每像素长度修改为18位。

//适当减小颜色查找表中存储的颜色总数，只保留常用的颜色；根据当前需要选择颜色存入颜色查找表中或更改表项。

![image-20211110170029646](D:\应用软件\Typora2\Typora\typora-user-images\image-20211110170029646-16365348321311.png)

## 实验

![image-20210920120007899](D:\应用软件\Typora2\Typora\typora-user-images\image-20210920120007899.png)

![image-20210927152218809](D:\应用软件\Typora2\Typora\typora-user-images\image-20210927152218809.png)

（换成同样的颜色后可以明显的看出用DDA和Bresenham算法画出的直线取样点比较稀疏，走样比较严重，没有openGL画线函数画出的线清晰）

